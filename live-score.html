<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>UVPL Live Score Sheet</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <style>
    body {
      background-image: url('assets/watermark.png');
      background-repeat: no-repeat;
      background-position: center;
      background-size: contain;
      opacity: 0.95;
    }
    .watermark-header {
      background: url('assets/watermark.png') center top no-repeat;
      background-size: 100px;
    }
  </style>
</head>
<body class="p-4">
  <div class="max-w-5xl mx-auto bg-white p-6 rounded shadow">
    <div class="flex justify-between items-center border-b pb-4">
      <img src="assets/logos/company-logo.png" alt="Company Logo" class="h-16">
      <h1 class="text-2xl font-bold text-center">UVPL - 5 Live Score Sheet</h1>
      <div class="flex space-x-2">
        <img id="team1-logo" src="assets/logos/team1.png" alt="Team 1 Logo" class="h-16">
        <img id="team2-logo" src="assets/logos/team2.png" alt="Team 2 Logo" class="h-16">
      </div>
    </div>

    <div class="mt-4">
      <div class="grid grid-cols-4 gap-4">
        <div class="font-bold">Set</div>
        <div id="team1-name">Team 1</div>
        <div id="team2-name">Team 2</div>
        <div>Winner</div>

        <template id="set-template">
          <div>Set <span class="set-number"></span></div>
          <div class="flex items-center">
            <button class="decrement bg-red-500 text-white px-2">-</button>
            <span class="mx-2 team1-score">0</span>
            <button class="increment bg-green-500 text-white px-2">+</button>
          </div>
          <div class="flex items-center">
            <button class="decrement bg-red-500 text-white px-2">-</button>
            <span class="mx-2 team2-score">0</span>
            <button class="increment bg-green-500 text-white px-2">+</button>
          </div>
          <div class="winner"></div>
        </template>
      </div>
    </div>

    <div class="mt-6 font-bold">Total:</div>
    <div class="grid grid-cols-3 gap-4 mb-4">
      <div>Total</div>
      <div id="team1-total">0</div>
      <div id="team2-total">0</div>
    </div>

    <div class="grid grid-cols-2 gap-8">
      <div>
        <h3 class="font-semibold">Team 1 Players</h3>
        <ul id="team1-players" class="space-y-2"></ul>
      </div>
      <div>
        <h3 class="font-semibold">Team 2 Players</h3>
        <ul id="team2-players" class="space-y-2"></ul>
      </div>
    </div>

    <div class="mt-6">
      <label class="block font-semibold">Referee Signature:</label>
      <input type="text" id="referee-sign" placeholder="Referee Name" class="w-full border p-2 rounded"/>
    </div>

    <div class="mt-6">
      <button onclick="generatePDF()" class="bg-blue-600 text-white px-4 py-2 rounded">Download PDF</button>
    </div>
  </div>

  <script>
    const team1Players = ['Player A1', 'Player A2', 'Player A3'];
    const team2Players = ['Player B1', 'Player B2', 'Player B3'];
    const numSets = 3;

    const team1Total = document.getElementById('team1-total');
    const team2Total = document.getElementById('team2-total');
    const setTemplate = document.getElementById('set-template');
    const container = setTemplate.parentElement;

    let scores = { team1: [0,0,0], team2: [0,0,0] };

    for (let i = 0; i < numSets; i++) {
      const clone = setTemplate.content.cloneNode(true);
      clone.querySelector('.set-number').textContent = i + 1;
      const team1Score = clone.querySelectorAll('.team1-score')[0];
      const team2Score = clone.querySelectorAll('.team2-score')[0];

      clone.querySelectorAll('.increment')[0].onclick = () => updateScore('team1', i, 1);
      clone.querySelectorAll('.decrement')[0].onclick = () => updateScore('team1', i, -1);
      clone.querySelectorAll('.increment')[1].onclick = () => updateScore('team2', i, 1);
      clone.querySelectorAll('.decrement')[1].onclick = () => updateScore('team2', i, -1);

      container.appendChild(clone);
    }

    function updateScore(team, setIndex, delta) {
      scores[team][setIndex] += delta;
      if (scores[team][setIndex] < 0) scores[team][setIndex] = 0;
      document.querySelectorAll(`.${team}-score`)[setIndex].textContent = scores[team][setIndex];
      updateTotal();
    }

    function updateTotal() {
      const total1 = scores.team1.reduce((a,b)=>a+b,0);
      const total2 = scores.team2.reduce((a,b)=>a+b,0);
      team1Total.textContent = total1;
      team2Total.textContent = total2;
    }

    function addPlayers(team, players) {
      const ul = document.getElementById(`${team}-players`);
      players.forEach((name, index) => {
        const li = document.createElement('li');
        li.innerHTML = `
          <span>${name}</span>
          <button onclick="adjustPlayerScore('${team}', ${index}, 1)" class="ml-2 px-1 bg-green-500 text-white">+</button>
          <button onclick="adjustPlayerScore('${team}', ${index}, -1)" class="ml-1 px-1 bg-red-500 text-white">-</button>
          <span id="${team}-player-${index}" class="ml-2">0</span>
        `;
        ul.appendChild(li);
      });
    }

    let playerScores = {
      team1: Array(team1Players.length).fill(0),
      team2: Array(team2Players.length).fill(0),
    };

    function adjustPlayerScore(team, index, delta) {
      playerScores[team][index] += delta;
      if (playerScores[team][index] < 0) playerScores[team][index] = 0;
      document.getElementById(`${team}-player-${index}`).textContent = playerScores[team][index];
    }

    addPlayers('team1', team1Players);
    addPlayers('team2', team2Players);

    function generatePDF() {
      alert('PDF generation will be handled here with logos, scores, players, and referee signature.');
      // Use html2pdf.js or similar library to export to PDF
    }
  </script>
</body>
</html>
